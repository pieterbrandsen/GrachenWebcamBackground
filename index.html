<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        $("#slideshow > div:gt(0)").hide();

        setInterval(function () {
          $("#slideshow > div:first")
            .fadeOut(1000)
            .next()
            .fadeIn(1000)
            .end()
            .appendTo("#slideshow");
        }, 1 * 60 * 1000);

        function update() {
          const cacheRefreshQuery = `?random=${new Date().getTime()}`;
          const dayOfMonth = new Date().getDate();
          const cameraNumbers = [8, 20, 9, 24];

          const getUrl = (webcamNumber) =>
            `https://www.steinbock77.ch/webcam_${webcamNumber}/bilder/mega${new Date().getDate()}.jpg`;

          for (let i = 0; i < cameraNumbers.length; i++) {
            const cameraNumber = cameraNumbers[i];
            if ($(`#${cameraNumber}`).length === 0) {
              console.log(`${cameraNumber} has been removed`);
              $("#slideshow").append(`<div><img id="${cameraNumber}" /></div>`);
              continue;
            }
            $(`#${cameraNumber}`)[0].src = getUrl(cameraNumber);
          }
        }
        update();
        setTimeout(update, 1000);
        setInterval(update, 5 * 60 * 1000);
      });
    </script>
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="slideshow"></div>
  </body>
</html>
